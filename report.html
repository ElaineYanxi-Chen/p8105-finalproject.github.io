<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Project Report</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Overview</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Exploratory Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ny_exploratory_analysis.html">New York State Analysis</a>
    </li>
    <li>
      <a href="nyc_exploratory_analysis.html">New York City</a>
    </li>
  </ul>
</li>
<li>
  <a href="statistical_analysis.html">Statistical Analysis</a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="team.html">Our Team</a>
    </li>
    <li>
      <a href="proposal.html">Project Proposal</a>
    </li>
  </ul>
</li>
<li>
  <a href="mailto:&lt;yc4017@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/ElaineYanxi-Chen/p8105-finalproject.github.io.git">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Project Report</h1>

</div>


<div id="motivation" class="section level1">
<h1>Motivation</h1>
<p>In 2019, many conservative states raced to enact an unprecedented
wave on bans on abortions that have severely restricted women’s
reproductive rights. These restrictions have culminated with the recent
Supreme Court overturning of Roe v. Wade, a landmark supreme court case
granting a women’s right to an abortion.</p>
<p><img src="images/2019_abortion.jpg" style = "width:70%"></p>
<p>Source: <a
href="https://www.guttmacher.org/article/2019/12/state-policy-trends-2019-wave-abortion-bans-some-states-are-fighting-back">Guttmacher
Institute</a></p>
<p>Since then, access to abortion has been significantly compromised and
even banned in several states across the country. Those that are likely
to be most impacted by this decision are individuals that belong to
under-served and marginalized communities. Changes in policies could
potentially lead to a variation in abortion trends in the country over
time. We want to explore these trends to understand the implications of
policy change in the country concerning reproductive rights.</p>
<p>Our year of interest is 2019, which is the most recent dataset
provided by New York State. We will be focusing on the numbers of
induced abortions in New York City, specifically, and compare the
differences across the boroughs.</p>
</div>
<div id="additional-resources-related-work" class="section level1">
<h1>Additional Resources/ Related Work</h1>
<p>Reproductive rights are basic human rights, and women should be
allowed to have full autonomy on decisions regarding their bodies. They
should be allowed to make decisions freely and responsibly and exercise
their rights. Reproductive justice goes far beyond the right to
abortion; the issue is inextricably bound to discrimination and
inequality. As residents of New York City, we wanted to analyze the
trends in abortion, and how it might be affected by factors such as
race/ethnicity, financial plan status and age.</p>
<p>Here’s some recent information on abortion clinics/ laws/ and
facts:</p>
<ul>
<li><p>In New York City, call the NYC Abortion Access Hub at <a
href="tel:18776922482">1-877-NYC-AHUB</a> or <a
href="tel:18776922482">1-877-692-2482</a></p></li>
<li><p><a
href="https://www.abortionfinder.org/">AbortionFinder.org</a></p></li>
<li><p><a
href="https://www.plannedparenthood.org/abortion-access">Planned
Parenthood</a></p></li>
<li><p><a
href="https://reproductiverights.org/maps/abortion-laws-by-state/">after
Roe Fell: Abortion Laws by State</a></p></li>
<li><p><a
href="https://www.guttmacher.org/state-policy/explore/overview-abortion-laws">Guttmacher
Institute</a></p></li>
<li><p><a
href="https://www.nytimes.com/2022/07/08/nyregion/abortion-new-york-roe.html">What’s
Next for Abortion Rights in New York?</a></p></li>
<li><p><a href="https://abortionfunds.org/">National Network of Abortion
Funds</a></p></li>
<li><p><a
href="https://lozierinstitute.org/abortion-reporting-new-york-city-2019/">Abortion
Reporting: New York City (2019)</a></p></li>
</ul>
</div>
<div id="initial-questions" class="section level1">
<h1>Initial questions</h1>
<p>Originally, we wanted to conduct a comparative analysis of abortion
rates in New York and Mississippi from 2017-2020 with the following
questions:</p>
<ul>
<li>Have abortion rates changed over time (2017 to 2020)?</li>
<li>What does the distribution of abortion rates between counties within
New York and Mississippi look like?</li>
<li>Are abortion rates different in New York compared to Mississippi
while accounting for age, race/ethnicity, method, and insurance
plan?</li>
</ul>
<p>We were unable to find a comprehensive dataset that included every
factor we were looking for, and decided to focus on conducting an
analysis of abortion numbers between boroughs in New York City in 2019.
As a result we have developed new research questions as listed as
following for our project:</p>
<div id="final-research-questions" class="section level2">
<h2>Final Research Questions:</h2>
<ul>
<li>What does the distribution of abortion between boroughs within New
York City look like in 2019?
<ul>
<li>Are abortion rates different in New York City while accounting for
age, race/ethnicity, method, and insurance plan in 2019?</li>
</ul></li>
<li>How do abortion rates differ between New York City and New York
State in 2019?</li>
<li>How do abortion rates differ within regions of New York State in
2019?
<ul>
<li>Are abortion rates different in New York City while accounting for
age, race/ethnicity, method, and insurance plan?</li>
</ul></li>
</ul>
</div>
</div>
<div id="data" class="section level1">
<h1>Data</h1>
<div id="source" class="section level2">
<h2>Source</h2>
<p>For this project, we will use data from <a
href="https://www.health.ny.gov/statistics/vital_statistics/">Vital
Statistics of New York State 2014-2019</a> (Individual data sets) which
consists of group-level data from New York City and New York State.</p>
<ul>
<li><p>The data wered collected from the New York State Bureau of Vital
Records who maintains a registry of all births, marriages,
divorces/dissolutions of marriage, deaths, induced termination of
pregnancy/abortions, and fetal deaths that have occurred in New York
State.</p></li>
<li><p>The <a
href="https://www.health.ny.gov/health_care/medicaid/redesign/ehr/registry/nycdohmh.htm">New
York City Department of Health and Mental Hygiene</a> sends data on on
live births, deaths, fetal deaths, induced terminations of
pregnancy/abortions (abortion), marriages, and divorces/dissolutions of
marriage recorded in New York City to the New York State Department of
Health.</p></li>
<li><p>The New York State Department of Health receives data on live
births and deaths recorded outside of New York State to residents of New
York State from other states and Canada.</p></li>
<li><p>The two regions are categorized as follows:</p>
<ul>
<li><p>New York City includes five counties: Bronx, Kings (Brooklyn),
New York (Manhattan), Queens and Richmond (Staten Island).</p></li>
<li><p>New York State outside of New York City, which encompasses the
remaining 57 counties.</p></li>
</ul></li>
</ul>
<p>From the Vital Statistics of New York State 2019, we will use data
from the <em>Induced Abortions</em> section, and will specifically focus
on data collected from New York City.</p>
</div>
<div id="data-scraping-and-cleaning" class="section level2">
<h2>Data Scraping and Cleaning</h2>
<p>We first imported the datasets from the internet and then cleaned
each dataset individually. For each dataset, we selected the variables
that were the most relevant and appropriate in exploring our research
question.</p>
<p>We renamed variable names for the different counties in New York City
to the name of the boroughs. Final variable names in our dataset for the
boroughs include:</p>
<ul>
<li><code>Manhattan</code></li>
<li><code>Bronx</code></li>
<li><code>Brooklyn</code></li>
<li><code>Queens</code></li>
<li><code>Staten Island</code></li>
</ul>
<p>Data on New York State were obtained from the same dataset, and
counties were recoded into regions based on categories set by New York
State using <code>transform</code>. Some counties had very few abortion
numbers, which would not provide a sufficient sample size when adjusting
the model for covariates. As a result, the categories helped ensure a
sufficient sample size.</p>
<p>The final regions included in the dataset for New York State
includes:</p>
<ul>
<li><code>Central New York</code></li>
<li><code>Eastern Adirondacks</code></li>
<li><code>Western Adirondacks</code></li>
<li><code>Saratoga</code></li>
<li><code>Finger Lakes</code></li>
<li><code>Western New York</code></li>
<li><code>Hudson Valley</code></li>
<li><code>Westchester/Rockland</code></li>
<li><code>Long Island</code></li>
<li><code>New York City</code></li>
</ul>
<p>The regions were created based on this <a
href="https://statejobs.ny.gov/assets/help/regionMapText.cfm">website</a></p>
<p>Abortion rates were calculated for regions within NY State, while for
NYC they were already available as rates. Rates were calculated by using
the following formula: <span class="math display">\[Abortion\ Rate\ per\
1000\ Live\ Births\ = \frac{Count}{Number\ of\ Live\ Births} \times
1000\]</span> Specific data cleaning processes for the covariates are
listed below.</p>
<div id="age" class="section level4">
<h4>Age</h4>
<p>Age was categorized as follows:</p>
<ul>
<li><code>age_less_20</code></li>
<li><code>age_20_24</code></li>
<li><code>age_25_29</code></li>
<li><code>age_30_34</code></li>
<li><code>age_35_39</code></li>
<li><code>age_plus_40</code></li>
</ul>
<pre class="r"><code># insert table??</code></pre>
</div>
<div id="raceethnicity" class="section level4">
<h4>Race/Ethnicity</h4>
<p>Race/Ethnicity was broken down into the following categories:</p>
<ul>
<li><code>Non-Hispanic White</code></li>
<li><code>Non-Hispanic Black</code></li>
</ul>
<p>Ethnicity is distinguished from race and is based on the ethnicity of
the mother. Ethnicity distinguishes individuals of Spanish origin
regardless of race. Race was self-reported.</p>
</div>
<div id="financial-plan-status" class="section level4">
<h4>Financial Plan Status</h4>
<p>The final variable names include:</p>
<ul>
<li><code>Medicaid</code></li>
<li><code>Other_insurance</code></li>
<li><code>self_pay</code></li>
<li><code>not stated</code></li>
</ul>
<p>The technical notes in the dataset did not specify which plans were
included under the <code>other_insurance</code> category.</p>
<p>After individual datasets were tidied, they were merged into a final
dataset which was then saved and exported to our project repository.
These steps were necessary to ensure that the code was readable and
reproducible.</p>
</div>
</div>
</div>
<div id="exploratory-analysis" class="section level1">
<h1>Exploratory analysis</h1>
<p>Our exploratory analysis was split into two categories - <a
href="ny_exploratory_analysis.html">New York State</a> and <a
href="nyc_exploratory_analysis.html">New York City</a>. We analyzed how
abortion rates may have different across different categories of our
covariates (Age, Race/Ethnicity and Financial Plan Status), using
plots.</p>
<div id="nyc-analysis-results" class="section level2">
<h2>NYC Analysis Results:</h2>
<div id="age-1" class="section level4">
<h4>Age:</h4>
<ul>
<li><p>The highest rates was found in Manhattan among those who are less
than 20 years old with a rate of 1964.9 induced abortions per 1000 live
births.</p></li>
<li><p>The second highest rate is was found among those less than 20
year old in Queens with a rate of 1780.1 induced abortions per 1000 live
births.</p></li>
<li><p><strong>Overall, the rate of abortions seem to decrease with age.
Across the age categories, it appears that Staten Island, New York
State, and Brooklyn seemed to have lower abortion rates.
</strong></p></li>
</ul>
</div>
<div id="finance" class="section level4">
<h4>Finance:</h4>
<ul>
<li><p>The highest rates were found in Manhattan among those with “Other
insurance” with a rate of 62.86k induced abortions per 1000 live
births.</p></li>
<li><p><strong>The rates were highest among those with “Other insurance”
and second highest among those with “self_pay.” Rates were lowest among
those with Medicaid. </strong></p></li>
</ul>
</div>
<div id="race" class="section level4">
<h4>Race:</h4>
<ul>
<li><p>Non-Hispanic Individuals:</p>
<ul>
<li>The highest rates were found in the Bronx among those who identify
as Non-Hispanic-Black Only with a rate of 1228.3 induced abortions per
1000 live births.</li>
<li>The lowest rate was found among Non-Hispanic White Only individuals
in Brooklyn with a rate of 88.6 induced abortions per 1000 live
births.</li>
<li><strong>The rates were highest among those who were
Non-Hispanic-Black Only.</strong></li>
</ul></li>
<li><p>Hispanic Individuals:</p>
<ul>
<li>The highest rates were found in the Bronx among those who are
Hispanic-Black Only with a rate of 684.6 induced abortions per 1000 live
births.</li>
<li>The lowest rate was found among Hispanic White-Only in Queens with a
rate of 80.4 induced abortions per 1000 live births.</li>
<li><strong>The rates were generally higher among those who were
Hispanic-Black Only in comparison to those who were Hispanic White-Only.
</strong></li>
</ul></li>
</ul>
</div>
<div id="year" class="section level4">
<h4>Year:</h4>
<ul>
<li>From the plot, it is evident that <strong>rates are generally
decreasing from 2014-2019.</strong></li>
</ul>
<p>It is important to note that Staten Island had a noticeable increase
and decrease of rates in 2016. This is likely due to an external factor,
like a policy change. However, Staten Island had the lowest rates for
most years in relation to the other boroughs overall. Bronx had the
highest rates between 2014-2019.</p>
</div>
</div>
<div id="ny-state-analysis-results" class="section level2">
<h2>NY State Analysis Results</h2>
</div>
</div>
<div id="statistical-analysis" class="section level1">
<h1>Statistical Analysis</h1>
<p>If you undertake formal statistical analyses, describe these in
detail</p>
</div>
<div id="limiations" class="section level1">
<h1>Limiations</h1>
<p>There were a couple of limitations in our project including the
amount of limited abortion data in some of the counties. For the race
dataset specifically, some of the data was noted as suppressed due to
confidentiality. As a result, we had to omit Eastern and Western
Adirondacks from our statistical analysis, despite the possibility that
there might be valuable information in these regions. Similarly, for the
financial plan dataset, there were some plans that had very small cell
counts. The plans with small cell counts were eventually omitted as they
were not included in the live birth data set, the denominator to
calculate abortion rates. As a result, the statistical analysis for
financial plan may not show the full scale of the differences between
the plans.</p>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
<p>What were your findings? Are they what you expect? What insights into
the data can you make?</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
